(function(){"use strict";var t={4647:function(t,e,n){var a=n(8935),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("ModalWindow",{model:{value:t.showGreeting,callback:function(e){t.showGreeting=e},expression:"showGreeting"}},[n("GreetingScreen",{on:{destroy:t.destroyGreeting}})],1),n("ErrorNotification",{model:{value:t.showErrors,callback:function(e){t.showErrors=e},expression:"showErrors"}})],1)},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"ModalWindow"},[n("div",{staticClass:"ModalWindow-overlay",on:{click:function(e){return t.$emit(t.EVENTS.CLOSE,!1)}}}),n("div",{staticClass:"ModalWindow-frame"},[n("button",{staticClass:"ModalWindow-button",on:{click:function(e){return t.$emit(t.EVENTS.CLOSE,!1)}}},[t._v(" X ")]),t._t("default")],2)]):t._e()},i=[],l={CLOSE:"close",CHANGE:"change",DESTROY:"destroy"},c={name:"ModalWindow",model:{prop:"show",event:l.CLOSE},props:{show:{type:Boolean,required:!1,default:!0}},data(){return{EVENTS:l}},mounted(){}},u=c,d=n(1001),h=(0,d.Z)(u,o,i,!1,null,"b0669580",null),p=h.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"GreetingScreen"},[n("h1",[t._v("Star Wars characters database")]),n("p",[t._v(" In this table you can find all the characters from Star Wars and some information related to them and their home planet. ")]),t._m(0),n("p",[n("label",[n("button",{on:{click:function(e){return t.$emit(t.EVENTS.DESTROY)}}},[t._v(" OK, DON'T SHOW THIS AGAIN ")])])])])},f=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v(" This project was made using "),n("a",{attrs:{href:"https://swapi.dev",target:"_blank"}},[t._v("SWAPI")]),t._v(". Sometimes the API takes longer than expected to provide the data, please be patient. ")])}],g={name:"GreetingScreen",data(){return{EVENTS:l}}},v=g,b=(0,d.Z)(v,m,f,!1,null,"b3cc7dd6",null),w=b.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("span",{staticClass:"ErrorNotification"},[t._v(" Error: "+t._s(t.$errors)+" "),n("button",{staticClass:"ErrorNotification-button",on:{click:function(e){return t.$emit(t.EVENTS.CLOSE,!1)}}},[t._v(" X ")])]):t._e()},y=[],_={name:"ErrorNotification",model:{prop:"show",event:l.CLOSE},props:{show:{type:Boolean,required:!1,default:!0}},data(){return{EVENTS:l}}},C=_,E=(0,d.Z)(C,S,y,!1,null,"5dc8936a",null),T=E.exports,I={ASC:"asc",DESC:"desc",TEAMWORK_FLAG:"teamworkFlag"};const{TEAMWORK_FLAG:B}=I;var x={name:"App",components:{ModalWindow:p,GreetingScreen:w,ErrorNotification:T},data(){return{showGreeting:!1,showErrors:!1}},watch:{$errors(t){this.showErrors=!!t}},created(){const t=!localStorage.getItem(B);this.showGreeting=t},methods:{destroyGreeting(){this.showGreeting=!1,localStorage.setItem(B,JSON.stringify(!0))}}},N=x,P=(0,d.Z)(N,r,s,!1,null,null,null),$=P.exports,k={update(t,e){e.value?(t.classList.add("is-loading"),t.setAttribute("disabled","disabled")):(t.classList.remove("is-loading"),t.removeAttribute("disabled"))}},A=n(2809),O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"HomePage"},[n("h1",{staticClass:"HomePage-title"},[t._v("Welcome to the Star Wars registry of people")]),n("SortableTable",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{headers:t.headers,items:t.people},scopedSlots:t._u([{key:"table-title",fn:function(){return[n("BannerText",[t._v("May the force be with you...")])]},proxy:!0},{key:"column.homeworld_name",fn:function(e){var a=e.content;return[n("a",{attrs:{href:"/planet/"+a},on:{click:function(e){return e.preventDefault(),t.showPlanetInfo(a)}}},[t._v(t._s(a))])]}},{key:"column.created",fn:function(e){var n=e.content;return[t._v(" "+t._s(new Date(n).toUTCString())+" ")]}},{key:"column.edited",fn:function(e){var n=e.content;return[t._v(" "+t._s(new Date(n).toUTCString())+" ")]}}])}),n("ModalWindow",{on:{close:function(e){return t.$router.push({name:"home"})}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("router-view")],1)],1)},M=[],L=n(6166),G=n.n(L);const Z="Some error occurred in our server:",W=10,H=2;async function D(t,e,n){const a=Array.from({length:n},((t,e)=>e+H)),r=a.map((async n=>await this.get(t,{...e,page:n})));return await Promise.all(r)}const j={async get(t,e){const n=this.getHeaders();try{const a=await G().get(`https://swapi.dev/api/${t}/`,{params:e,headers:n});if(200===a.status)return a;throw a.status}catch(r){a.Z.prototype.$errors=`${Z} ${r}`}},async getAll_old(t,e){let n=!0,a=1,r=[];while(n){const s=await this.get(t,{...e,page:a});s?(r=[...r,...s.data.results],n=!!s.data.next,a++):n=!1}return r},async getAll(t,e){const n=await this.get(t,{...e});let a=n.data.results;if(n.data.count>W){const r=Math.ceil(n.data.count/W)-1,s=await D.call(this,t,e,r);s.forEach((t=>{a=t?[...a,...t.data.results]:a}))}return a},async getUrl(t){const e=this.getHeaders();try{const n=await G().get(t,{headers:e});if(200===n.status)return n;throw n.status}catch(n){a.Z.prototype.$errors=`${Z} ${n}`}},getHeaders(){return{"Content-Type":"application/json"}}};var q=j;let U=null,V=null;const F={async getAllPlanets(){return V||(V=await q.getAll("planets")),V},async getPlanetInfo(t){const e=await this.getPlanetsMap(),n=Object.keys(e).find((n=>e[n]===t));let a=null;if(V)a=V.find((t=>t.url===n));else{const t=await q.getUrl(n);a=t.data}return a},async getPlanetsMap(){if(!U){const t=await this.getAllPlanets(),e={};t.forEach((t=>{e[t.url]=t.name})),U=e}return U}};var K=F;async function R(t){const e=await K.getPlanetsMap();return t.map((t=>(t.homeworld_name=e[t.homeworld],t)))}const X={async getAllPeople(){const t=await q.getAll("people"),e=await R(t);return e}};var Y=X,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"SortableTable"},[n("div",{staticClass:"SortableTable-title"},[n("div",{staticClass:"SortableTable-titleSlot"},[t._t("table-title")],2),n("SearchBox",{staticClass:"SortableTable-searchBox",on:{change:t.searchByName}})],1),n("div",{staticClass:"SortableTable-tableWrapper"},[n("table",{staticClass:"SortableTable-table"},[n("thead",{staticClass:"SortableTable-tableHead"},[n("tr",{staticClass:"SortableTable-row"},t._l(t.headerKeys,(function(e,a){return n("th",{key:a,staticClass:"SortableTable-header"},[n("span",{staticClass:"SortableTable-headerContent"},[t._v(" "+t._s(t.headers[e])+" ")]),n("ToggleButton",{ref:"toggleButtons",refInFor:!0,staticClass:"SortableTable-toggleButton",on:{change:function(n){return t.toggleSort(e,n)}},model:{value:t.sortButtons[e],callback:function(n){t.$set(t.sortButtons,e,n)},expression:"sortButtons[key]"}})],1)})),0)]),n("tbody",{staticClass:"SortableTable-tableBody"},t._l(t.currentItems,(function(e,a){return n("tr",{key:a,staticClass:"SortableTable-row"},t._l(t.headerKeys,(function(a,r){return n("td",{key:r,staticClass:"SortableTable-item"},[t._t("column."+a,(function(){return[t._v(" "+t._s(e[a])+" ")]}),{content:e[a]})],2)})),0)})),0)])])])},z=[],Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"SearchBox",on:{submit:function(e){return e.preventDefault(),t.$emit(t.EVENTS.CHANGE,t.query)}}},[n("label",{staticClass:"SearchBox-label"},[t._v(" Search: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"SearchBox-input",attrs:{type:"text",placeholder:"Type a name"},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}})]),n("button",{staticClass:"SearchBox-button",attrs:{type:"submit"}},[t._v("Go!")])])},tt=[],et={name:"SearchBox",data(){return{EVENTS:l,query:""}}},nt=et,at=(0,d.Z)(nt,Q,tt,!1,null,"5d2092aa",null),rt=at.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ToggleButton"},[n("button",{staticClass:"ToggleButton-action ToggleButton-action--asc",class:{"ToggleButton-action--active":t.currentState===t.ASC},attrs:{title:"Ascending"},on:{click:function(e){return t.toggleState(t.ASC)}}},[t._v(" ▲ ")]),n("button",{staticClass:"ToggleButton-action ToggleButton-action--desc",class:{"ToggleButton-action--active":t.currentState===t.DESC},attrs:{title:"Descending"},on:{click:function(e){return t.toggleState(t.DESC)}}},[t._v(" ▼ ")])])},ot=[],it={name:"ToggleButton",model:{prop:"state",event:l.CHANGE},props:{state:{type:String,required:!1,default:null}},watch:{state(t){this.currentState=t}},data(){return{EVENTS:l,ASC:I.ASC,DESC:I.DESC,currentState:this.state}},methods:{toggleState(t){this.currentState=this.currentState===t?null:t,this.$emit(l.CHANGE,this.currentState)}}},lt=it,ct=(0,d.Z)(lt,st,ot,!1,null,"48a028d8",null),ut=ct.exports;const dt={isNumber(t){return"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))}};var ht=dt;const{ASC:pt}=I;var mt={name:"SortableTable",components:{SearchBox:rt,ToggleButton:ut},data(){return{currentItems:[...this.items],currentItemsUnsorted:this.items,sortButtons:{},query:""}},props:{items:{type:Array,required:!0},headers:{type:Object,required:!0}},computed:{headerKeys(){return Object.keys(this.headers)}},watch:{items(t){this.currentItems=[...t],this.currentItemsUnsorted=t}},mounted(){},methods:{toggleSort(t=null,e=null){this.resetSortButtons(t),null===e||null===t?this.currentItems=[...this.currentItemsUnsorted]:this.currentItems.sort(this.sortByColumn(t,e))},sortByColumn(t,e){return(n,a)=>{if(ht.isNumber(n[t])&&ht.isNumber(a[t])){const r=+n[t],s=+a[t];return e===pt?r-s:s-r}{const r=e===pt?1:-1,s="string"===typeof n[t]?n[t].toUpperCase():n[t],o="string"===typeof a[t]?a[t].toUpperCase():a[t];return s<o?-1*r:s>o?1*r:0}}},searchByName(t){this.toggleSort(),t?(this.currentItems=this.items.filter((e=>{let n=new RegExp(t,"i");return null!==e.name.match(n)})),this.currentItemsUnsorted=[...this.currentItems]):(this.currentItems=[...this.items],this.currentItemsUnsorted=this.items)},resetSortButtons(t=null){Object.keys(this.sortButtons).forEach((e=>{e!==t&&(this.sortButtons[e]=null)}))}}},ft=mt,gt=(0,d.Z)(ft,J,z,!1,null,"1ff1c446",null),vt=gt.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"BannerText"},[n("div",{staticClass:"BannerText-contentWrapper"},[n("span",{staticClass:"BannerText-content"},[t._t("default")],2)]),n("span",{staticClass:"BannerText-placeHolder"},[t._t("default")],2)])},wt=[],St={name:"BannerText"},yt=St,_t=(0,d.Z)(yt,bt,wt,!1,null,"74fae740",null),Ct=_t.exports,Et={name:"HomePage",components:{SortableTable:vt,ModalWindow:p,BannerText:Ct},watch:{async["$route.params.planet"](t){this.showModal=!!t}},data(){return{isLoading:!1,isPlanetLoading:!1,showModal:!1,people:[],headers:{name:"Name",height:"Height",mass:"Mass",created:"Created",edited:"Edited",homeworld_name:"Planet Name"}}},async mounted(){this.loadPeople(),this.$route.params.planet&&(this.showModal=!0)},methods:{async loadPeople(){this.isLoading=!0;const t=await Y.getAllPeople();this.people=t,this.isLoading=!1},async showPlanetInfo(t){this.showModal=!0,this.$router.push({name:"planet",params:{planet:t}})}}},Tt=Et,It=(0,d.Z)(Tt,O,M,!1,null,"3b6079a2",null),Bt=It.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"PlanetInformation"},[n("h1",{staticClass:"PlanetInformation-title"},[t._v("Planet Information")]),t.planetInfo?n("dl",{staticClass:"PlanetInformation-list"},[n("div",{staticClass:"PlanetInformation-set"},[n("dt",[t._v("Name:")]),n("dd",[t._v(t._s(t.planetInfo.name))])]),n("div",{staticClass:"PlanetInformation-set"},[n("dt",[t._v("Diameter:")]),n("dd",[t._v(t._s(t.planetInfo.diameter))])]),n("div",{staticClass:"PlanetInformation-set"},[n("dt",[t._v("Climate:")]),n("dd",[t._v(t._s(t.planetInfo.climate))])]),n("div",{staticClass:"PlanetInformation-set"},[n("dt",[t._v("Population:")]),n("dd",[t._v(t._s(t.planetInfo.population))])])]):t._e()])},Nt=[],Pt={name:"PlanetInformation",props:{planet:{type:String,required:!0}},data(){return{isLoading:!1,planetInfo:null}},async mounted(){await this.getPlanetInfo()},methods:{async getPlanetInfo(){this.isLoading=!0,this.planetInfo=await K.getPlanetInfo(this.planet),this.isLoading=!1}}},$t=Pt,kt=(0,d.Z)($t,xt,Nt,!1,null,"4f517444",null),At=kt.exports;a.Z.use(A.Z);const Ot=[{path:"/",name:"home",component:Bt,children:[{path:"planet/:planet",name:"planet",component:At,props:!0}]},{path:"*",redirect:"/"}],Mt=new A.Z({mode:"history",routes:Ot});var Lt=Mt;a.Z.config.productionTip=!1,a.Z.directive("loading",k);const Gt=a.Z.observable({errors:{}});Object.defineProperty(a.Z.prototype,"$errors",{get(){return Gt.errors},set(t){Gt.errors=t}}),new a.Z({router:Lt,render:t=>t($)}).$mount("#app")}},e={};function n(a){var r=e[a];if(void 0!==r)return r.exports;var s=e[a]={exports:{}};return t[a](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,a,r,s){if(!a){var o=1/0;for(u=0;u<t.length;u++){a=t[u][0],r=t[u][1],s=t[u][2];for(var i=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](a[l])}))?a.splice(l--,1):(i=!1,s<o&&(o=s));if(i){t.splice(u--,1);var c=r();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[a,r,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,s,o=a[0],i=a[1],l=a[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(l)var u=l(n)}for(e&&e(a);c<o.length;c++)s=o[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(u)},a=self["webpackChunkteamwork"]=self["webpackChunkteamwork"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4647)}));a=n.O(a)})();
//# sourceMappingURL=app.83097fab.js.map